<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>はたらかない細胞 - クイズゲーム</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- スタート画面 -->
  <div id="section-start" class="section">
    <h1>はたらかない細胞</h1>
    <button id="btn-start">ゲームスタート</button>
  </div>

  <!-- グループ名入力画面 -->
  <div id="section-group" class="section" style="display: none;">
    <h2>グループ名を入力してください</h2>
    <input type="text" id="groupName" placeholder="グループ名">
    <div class="nav-buttons">
      <button class="btn-nav" onclick="navigate('start')">前へ</button>
      <button class="btn-nav" onclick="saveGroupName()">次へ</button>
    </div>
  </div>

  <!-- 抗原数選択画面 -->
  <div id="section-antigen" class="section" style="display: none;">
    <h2>抗原数を選択してください</h2>
    <div class="counter">
      <button onclick="changeAntigen(-1)">－</button>
      <input type="number" id="antigenCount" value="0" min="0">
      <button onclick="changeAntigen(1)">＋</button>
    </div>
    <div class="nav-buttons">
      <button class="btn-nav" onclick="navigate('group')">前へ</button>
      <button class="btn-nav" onclick="saveAntigen()">次へ</button>
    </div>
  </div>

  <!-- クイズ難易度選択画面 -->
  <div id="section-quiz-difficulty" class="section" style="display: none;">
    <h2>クイズの難易度を選択してください</h2>
    <div id="difficulty-buttons" class="button-group">
      <button class="difficulty-btn" onclick="selectDifficulty(1, this)">レベル1</button>
      <button class="difficulty-btn" onclick="selectDifficulty(2, this)">レベル2</button>
      <button class="difficulty-btn" onclick="selectDifficulty(3, this)">レベル3</button>
      <button class="difficulty-btn" onclick="selectDifficulty(4, this)">レベル4</button>
      <button class="difficulty-btn" onclick="selectDifficulty(5, this)">レベル5</button>
    </div>
    <div class="nav-buttons">
      <button class="btn-nav" onclick="navigate('antigen')">前へ</button>
      <button class="btn-nav" id="btn-difficulty-next" onclick="navigate('quiz'); loadQuizQuestion();" disabled>次へ</button>
    </div>
  </div>

  <!-- クイズ画面 -->
  <div id="section-quiz" class="section" style="display: none;">
    <div id="quiz-container">
      <h2 id="quiz-question">クイズの質問</h2>
      <div id="quiz-options" class="options-container">
        <!-- 選択肢は JavaScript で生成 -->
      </div>
      <!-- 確認メッセージをオーバーレイ表示 -->
      <div id="quiz-confirmation" class="confirmation" style="display: none;">
        <div class="confirmation-box">
          <p id="confirmation-text"></p>
          <button class="btn-nav" id="confirm-yes" onclick="confirmAnswer(true)">はい</button>
          <button class="btn-nav" id="confirm-no" onclick="confirmAnswer(false)">いいえ</button>
        </div>
      </div>
      <!-- 正誤判定＆解説表示 -->
      <div id="quiz-feedback" class="feedback" style="display: none;">
        <p id="feedback-text"></p>
        <button class="btn-nav" onclick="nextAfterQuiz()">次へ</button>
      </div>
    </div>
    <div class="nav-buttons">
      <button class="btn-nav" onclick="navigate('quiz-difficulty')">前へ</button>
    </div>
  </div>

  <!-- 的の数入力画面 -->
  <div id="section-target" class="section" style="display: none;">
    <h2>的の数を入力してください</h2>
    <div class="counter">
      <button onclick="changeTarget(-1)">－</button>
      <input type="number" id="targetCount" value="0" min="0">
      <button onclick="changeTarget(1)">＋</button>
    </div>
    <div class="nav-buttons">
      <button class="btn-nav" onclick="navigate('quiz')">前へ</button>
      <button class="btn-nav" onclick="saveTarget()">次へ</button>
    </div>
  </div>

  <!-- 結果表示画面 -->
  <div id="section-result" class="section" style="display: none;">
    <h2 id="result-message">あなたのグループの得点は ○○ 点です！</h2>
    <div class="nav-buttons">
      <button class="btn-nav" onclick="navigate('target')">前へ</button>
      <button class="btn-nav" onclick="submitData()">結果を送信</button>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
